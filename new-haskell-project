#!/usr/bin/env bash

if [ -z $1 ]
then
  echo "Must provide project name, will do nothing."
  exit
fi

mkdir $1
cd $1

cat > $1.cabal <<eof
name:                   $1
version:                0.1.0.0
build-type:             Simple
cabal-version:          >=1.10

executable $1
  hs-source-dirs:       src
  main-is:              Main.hs
  default-language:     Haskell2010
  ghc-options:          -Wall -Werror -fno-warn-missing-signatures -fno-warn-partial-type-signatures
  build-depends:        base
eof

cat > Setup.hs <<eof
import Distribution.Simple
main = defaultMain
eof

mkdir src
cat > src/Main.hs <<eof
module Main(main) where

main :: IO ()
main = do
  putStrLn "hello world"
eof

cat > .gitignore <<eof
.stack-work
eof

cat > run.sh <<eof
stack build && stack exec $1
eof
chmod +x run.sh

stack init

git init
git add .
git commit -m "Create project"
